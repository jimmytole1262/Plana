<div class="main">
  <div class="container">
    <div class="navbar">
      <div class="header">
        <h3>PLANA</h3>
        <i class="fa fa-calendar-check-o" aria-hidden="true"></i>
      </div>
      <div class="menu">
        <p routerLink="/user-profile">Profile</p>
        <p routerLink="/user-bookings">Bookings</p>
        <p routerLink="/issues">Issues</p>
        <p (click)="logout()">Logout</p>
      </div>
    </div>

    <div class="search-username">
      <div class="search-events">
        <input type="text" placeholder="search for events">
        <i class="fa fa-search" aria-hidden="true"></i>
      </div>
      <div class="welcome-user">
        <p>Welcome {{ username }}</p>
      </div>
    </div>

    <div class="bottom">
      <div *ngIf="bookingMessage" class="login-message">{{ bookingMessage }}</div>
      <div *ngIf="bookingError" class="error-message">{{ bookingError }}</div>
      <div class="upcoming-events">
        <h3>UPCOMING EVENTS</h3>
        <div class="images-events">
          <div class="image-description" *ngFor="let event of events">
            <img [src]="event.image" alt="Event image">
            <h4>{{ event.title }}</h4>
            <p>{{ event.description }}</p>
            <p>Ticket-type: {{ event.ticket_type }}</p>
            <p>Date: {{ event.date | date }}</p>
            <p>Price: Ksh {{ event.price }}</p>
            <p>Available Tickets: {{ event.available_tickets }}</p>
            <button (click)="openPaymentModal(event)">Book Event</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Payment Modal -->
  <div class="modal" *ngIf="showModal">
    <div class="modal-content">
      <span class="close" (click)="closeModal()">&times;</span>
      <h3>Confirm Your Booking</h3>
      <div *ngIf="selectedEvent">
        <p><strong>Event:</strong> {{ selectedEvent.title }}</p>
        <p><strong>Description:</strong> {{ selectedEvent.description }}</p>
        <p><strong>Date:</strong> {{ selectedEvent.date | date }}</p>
        <p><strong>Price:</strong> Ksh {{ selectedEvent.price }}</p>
        <p><strong>Booked by:</strong> {{ username }}</p>
      </div>
      <button class="confirm-btn" (click)="confirmPayment(selectedEvent?.event_id!)">Confirm Payment</button>
      <button class="cancel-btn" (click)="closeModal()">Cancel</button>
    </div>
  </div>
</div>